<?php ob_start(); session_start(); require('routeros_api.class.php'); ?>

<?php
		$API = new routeros_api();
		$IP = $_SESSION[ 'ip' ];
		$user = $_SESSION[ 'user' ];
		$password = $_SESSION[ 'password' ];
		//Comprobamos conexion API
		if ($API->connect($IP, $user, $password)) {

		//Comprobamos interfaces
		
		$Ports = $API->comm("/interface/ethernet/print");
		$numPorts = count($Ports);

		<table>
				<td>
				<table class="SwitchTable">
				<?php

					
					for ($cont = 0; $cont < $numPorts; $cont++){
					
						echo "<tr>
						<td>".$Ports[$cont]['name']."</td>
						<td>
						<form action=Switch.php method=post>";
						echo "<div class='styled-selectSwitch'><select name='formMaster$cont' onchange='this.form.submit()'>
  							<option value=''>".$Ports[$cont]['master-port']."</option>";
							
							for ($cont2 = 0; $cont2 < $numPorts; $cont2++){
								if ($Ports[$cont]['master-port'] != $Ports[$cont2]['name']){
								
								
								echo "<option value='".$Ports[$cont2]['name']."'>".$Ports[$cont2]['name']."</option>"; 
								} 								
								
							}
							if ($Ports[$cont]['master-port'] != 'none'){
							echo "<option value='none'>".none."</option>";}

						echo "</select</div>></form>";	
						echo "</td>";
									
						echo "</tr>";
					}
				?>
					</table>
				</td>
				<td>
						
				?>

